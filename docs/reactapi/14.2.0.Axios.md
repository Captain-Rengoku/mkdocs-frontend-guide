---
date: 
  created: 2025-08-12
---

# Intoduction to  Axios

## Introduction to Axios

### What is Axios?

Axios is a **promise-based HTTP client** for the browser and Node.js.  
It allows you to send **asynchronous HTTP requests** to REST endpoints and perform CRUD operations (Create, Read, Update, Delete) easily.

- Works in **both** frontend (browser) and backend (Node.js) environments.
- Supports modern JavaScript features like `async/await`.
- Handles **JSON data** automatically.

Example:

```js
import axios from "axios";

axios.get("https://api.example.com/data")
  .then(response => console.log(response.data))
  .catch(error => console.error(error));
```

### Key Features

- ✅ Supports GET, POST, PUT, PATCH, DELETE requests.
- ✅ Promise-based and works with async/await.
- ✅ Automatic JSON data transformation.
- ✅ Request & response interceptors.
- ✅ Cancels requests to prevent race conditions.
- ✅ Supports file upload & download.
- ✅ Works in Node.js and browsers.
- ✅ Allows custom headers & default configurations.

### Axios vs Fetch API

| Feature             | Axios                                     | Fetch API                                 |
|---------------------|-------------------------------------------|-------------------------------------------|
| **Syntax**          | Short & simple                           | More verbose, manual steps required       |
| **Browser Support** | Supports older browsers (with polyfill)  | Modern browsers only                       |
| **JSON Handling**   | Automatically parses JSON                | Must call `.json()` manually               |
| **Error Handling**  | Rejects for HTTP errors (status ≥ 400)   | Only rejects on network failure            |
| **Timeouts**        | Built-in timeout option                  | Requires `AbortController` implementation  |
| **Interceptors**    | Yes (request & response)                 | No (must be implemented manually)          |
| **Upload/Download** | Easy file handling                       | More boilerplate required                   |
| **Node.js Support** | Works out of the box                     | Needs `node-fetch` or similar package      |

### When to Use Axios

- You should prefer Axios over Fetch when:
- You need automatic JSON parsing and simpler syntax.
- You want built-in error handling for HTTP errors (status ≥ 400).
- You require interceptors for logging, auth tokens, or request modifications.
- You’re making repeated requests to the same API and want a custom instance with defaults.
- You want request cancellation to avoid duplicate or outdated requests.
- You need Node.js compatibility without extra polyfills.

## Installation & Setup

### Installation via npm

```bash
npm install axios
```

### CDN Usage

If you don’t want to install via npm/yarn, you can use Axios directly in the browser via a CDN link

```html
<!-- jsDelivr CDN -->
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

<!-- or unpkg CDN -->
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>

<script>
  axios.get("https://api.example.com/data")
    .then(response => console.log(response.data))
    .catch(error => console.error(error));
</script>
```

## Basic Usage

### **In JavaScript**

```js
// Example of making a GET request
// Used to retrieve data from a server.
import axios from "axios";

axios.get("https://api.example.com/posts")
  .then(response => {console.log(response.data)})
  .catch(error => {console.error(error)});
```

```js
// Example of making a POST request
// Used to send data to the server, often for creating new resources.
import axios from "axios";

axios.post("https://api.example.com/posts", {
  title: "New Post",
  body: "This is the content of the post",
  userId: 1
})
  .then(response => {console.log(response.data)})
  .catch(error => {console.error(error)});
```

```js
// PUT Request
// Used to update an existing resource by replacing it completely.
import axios from "axios";

axios.put("https://api.example.com/posts/1", {
  id: 1,
  title: "Updated Post",
  body: "Updated content",
  userId: 1
})
  .then(response => {console.log(response.data)})
  .catch(error => {console.error(error)});
```

```js
// PATCH Request
// Used to partially update an existing resource.
import axios from "axios";

axios.patch("https://api.example.com/posts/1", {
  title: "Partially Updated Post"
})
  .then(response => {console.log(response.data)})
  .catch(error => {console.error(error)});
```

```js
// DELETE Request
// Used to remove a resource.
import axios from "axios";

axios.delete("https://api.example.com/posts/1")
  .then(response => {console.log("Deleted:", response.status}))
  .catch(error => {console.error(error)});
```

```js
// Sending Query Parameters
// Axios provides two ways to send query parameters:

// Inline in the URL
axios.get("https://api.example.com/posts?userId=1&limit=5")
  .then(response => console.log(response.data))
  .catch(error => console.error(error));

// OR

// Using params option
axios.get("https://api.example.com/posts", {
  params: {
    userId: 1,
    limit: 5
  }
})
  .then(response => console.log(response.data))
  .catch(error => console.error(error));
```

```js
// All Axios methods return a Promise, so you can also use async/await:
async function getPosts() {
  try {
    const response = await axios.get("https://api.example.com/posts");
    console.log(response.data);
  } catch (error) {
    console.error(error);
  }
}

getPosts();
```

### **In TypeScript**

- TypeScript allows you to define the expected shape of the response data for type safety.

```ts
import axios, { AxiosResponse } from "axios";

// Define API response types
interface Post {
  id: number;
  title: string;
  body: string;
  userId: number;
}
interface NewPost {
  title: string;
  body: string;
  userId: number;
}
type PostsResponse = Post[];
type SinglePostResponse = Post;


// Example of making a GET request
// Used to retrieve data from a server.
async function getPosts(): Promise<void> {
  try {
    const response: AxiosResponse<PostsResponse> = await axios.get("https://api.example.com/posts");
    console.log(response.data);
  } catch (error) {
    console.error(error);
  }
}
getPosts();


// Example of making a POST request
// Used to send data to the server, often for creating new resources.
async function createPost(): Promise<void> {
  try {
    const newPost: NewPost = {
      title: "New Post",
      body: "This is the content of the post",
      userId: 1
    };
    const response: AxiosResponse<SinglePostResponse> = await axios.post("https://api.example.com/posts", newPost);
    console.log(response.data);
  } catch (error) {
    console.error(error);
  }
}
createPost();


// PUT Request
// Used to update an existing resource by replacing it completely.
async function updatePost(): Promise<void> {
  try {
    const updatedPost: Post = {
      id: 1,
      title: "Updated Post",
      body: "Updated content",
      userId: 1
    };
    const response: AxiosResponse<SinglePostResponse> = await axios.put("https://api.example.com/posts/1", updatedPost);
    console.log(response.data);
  } catch (error) {
    console.error(error);
  }
}
updatePost();


// PATCH Request
// Used to partially update an existing resource.
async function patchPost(): Promise<void> {
  try {
    const response: AxiosResponse<SinglePostResponse> = await axios.patch("https://api.example.com/posts/1", {
      title: "Partially Updated Post"
    });
    console.log(response.data);
  } catch (error) {
    console.error(error);
  }
}
patchPost();


// DELETE Request
// Used to remove a resource.
async function deletePost(): Promise<void> {
  try {
    const response: AxiosResponse<void> = await axios.delete("https://api.example.com/posts/1");
    console.log("Deleted:", response.status);
  } catch (error) {
    console.error(error);
  }
}
deletePost();


// Sending Query Parameters
// Inline in the URL
async function getPostsWithQuery1(): Promise<void> {
  try {
    const response: AxiosResponse<PostsResponse> = await axios.get("https://api.example.com/posts?userId=1&limit=5");
    console.log(response.data);
  } catch (error) {
    console.error(error);
  }
}


// Using params option
async function getPostsWithQuery2(): Promise<void> {
  try {
    const response: AxiosResponse<PostsResponse> = await axios.get("https://api.example.com/posts", {
      params: {
        userId: 1,
        limit: 5
      }
    });
    console.log(response.data);
  } catch (error) {
    console.error(error);
  }
}

getPostsWithQuery1();
getPostsWithQuery2();
```

## Request Configuration

```ts
import axios, { AxiosRequestConfig, AxiosResponse } from "axios";

// Define API response type
interface Post {
  id: number;
  title: string;
  body: string;
  userId: number;
}

/* ---------------------------
   1. Axios Config Object
--------------------------- */
// The Axios config object allows you to set method, URL, headers, params, timeout, etc.
async function getPostsWithConfig(): Promise<void> {
  const config: AxiosRequestConfig = {
    method: "GET",
    url: "https://api.example.com/posts",
    params: { userId: 1 },
    headers: { "Accept": "application/json" }
  };

  try {
    const response: AxiosResponse<Post[]> = await axios(config);
    console.log(response.data);
  } catch (error) {
    console.error(error);
  }
}

getPostsWithConfig();

/* ---------------------------
   2. Base URLs
--------------------------- */
// Instead of writing full URLs, set a baseURL for all requests
const api = axios.create({
  baseURL: "https://api.example.com",
});

async function getPostsFromBaseURL(): Promise<void> {
  try {
    const response: AxiosResponse<Post[]> = await api.get("/posts");
    console.log(response.data);
  } catch (error) {
    console.error(error);
  }
}

getPostsFromBaseURL();

/* ---------------------------
   3. Headers
--------------------------- */
// You can set custom headers for authentication or other requirements
async function getPostsWithHeaders(): Promise<void> {
  try {
    const response: AxiosResponse<Post[]> = await axios.get("https://api.example.com/posts", {
      headers: {
        Authorization: "Bearer YOUR_TOKEN_HERE",
        "Content-Type": "application/json"
      }
    });
    console.log(response.data);
  } catch (error) {
    console.error(error);
  }
}

getPostsWithHeaders();

/* ---------------------------
   4. Timeouts
--------------------------- */
// Set a timeout in milliseconds; request will fail if it takes longer
async function getPostsWithTimeout(): Promise<void> {
  try {
    const response: AxiosResponse<Post[]> = await axios.get("https://api.example.com/posts", {
      timeout: 3000 // 3 seconds
    });
    console.log(response.data);
  } catch (error) {
    console.error("Request timed out or failed:", error);
  }
}

getPostsWithTimeout();

/* ---------------------------
   5. Transforming Requests & Responses
--------------------------- */
// Transform request before sending and transform response before handling
async function getPostsWithTransforms(): Promise<void> {
  try {
    const response: AxiosResponse<Post[]> = await axios.get("https://api.example.com/posts", {
      transformRequest: [(data, headers) => {
        console.log("Original Headers:", headers);
        return data; // Can modify data before sending
      }],
      transformResponse: [(data) => {
        const parsedData: Post[] = JSON.parse(data);
        return parsedData.map(post => ({
          ...post,
          title: post.title.toUpperCase() // Transform titles to uppercase
        }));
      }]
    });
    console.log("Transformed Data:", response.data);
  } catch (error) {
    console.error(error);
  }
}

getPostsWithTransforms();
```

## Response Handling

```ts
import axios, { AxiosResponse, AxiosError } from "axios";

// Define API response type
interface Post {
  id: number;
  title: string;
  body: string;
  userId: number;
}

/* ---------------------------
   1. Response Structure
--------------------------- */
// Every Axios response contains these main properties:
// - data: The response body (already parsed if JSON)
// - status: HTTP status code (e.g., 200, 404)
// - statusText: HTTP status message (e.g., "OK")
// - headers: Response headers object
// - config: The request configuration used
// - request: The actual request object

async function getPostById(id: number): Promise<void> {
  try {
    const response: AxiosResponse<Post> = await axios.get(`https://api.example.com/posts/${id}`);
    console.log("Data:", response.data);       // Parsed response body
    console.log("Status:", response.status);   // e.g., 200
    console.log("Headers:", response.headers); // e.g., content-type
    console.log("Config:", response.config);   // Original request config
  } catch (error) {
    console.error(error);
  }
}

getPostById(1);

/* ---------------------------
   2. Handling JSON Data
--------------------------- */
// Axios automatically parses JSON responses, so no need for response.json() like Fetch API
async function getAllPosts(): Promise<void> {
  try {
    const response: AxiosResponse<Post[]> = await axios.get("https://api.example.com/posts");
    // Directly work with parsed JSON
    response.data.forEach(post => {
      console.log(`${post.id}: ${post.title}`);
    });
  } catch (error) {
    console.error(error);
  }
}

getAllPosts();

/* ---------------------------
   3. Error Handling
--------------------------- */
// Use try...catch with axios.isAxiosError() to safely identify Axios errors
async function getInvalidPost(): Promise<void> {
  try {
    const response: AxiosResponse<Post> = await axios.get("https://api.example.com/posts/9999");
    console.log(response.data);
  } catch (error) {
    if (axios.isAxiosError(error)) {
      console.error("Axios error message:", error.message);
      if (error.response) {
        // Server responded with a status code outside 2xx range
        console.error("Status:", error.response.status);
        console.error("Data:", error.response.data);
      } else if (error.request) {
        // Request was made but no response received
        console.error("No response received:", error.request);
      } else {
        // Something else caused the error
        console.error("Error setting up request:", error.message);
      }
    } else {
      // Non-Axios error (unexpected)
      console.error("Unexpected error:", error);
    }
  }
}

getInvalidPost();
```

## Advanced Axios Features

```ts
import axios, { AxiosInstance, AxiosRequestConfig, AxiosResponse, AxiosError, CancelTokenSource } from "axios";

/* ---------------------------
   1. Creating Axios Instances
--------------------------- */
// Instead of using axios.get/post directly, create an instance with shared settings
const apiClient: AxiosInstance = axios.create({
  baseURL: "https://api.example.com",
  timeout: 5000,
  headers: { "Content-Type": "application/json" }
});

async function fetchPosts() {
  const response: AxiosResponse = await apiClient.get("/posts");
  console.log("Posts:", response.data);
}

/* ---------------------------
   2. Default Configurations
--------------------------- */
// Set defaults globally (affects all requests)
axios.defaults.baseURL = "https://api.example.com";
axios.defaults.timeout = 5000;
axios.defaults.headers.common["Authorization"] = "Bearer your-token";

/* ---------------------------
   3. Interceptors (Request & Response)
--------------------------- */
// Request Interceptor: modify requests before they are sent
apiClient.interceptors.request.use(
  (config: AxiosRequestConfig) => {
    console.log("Request sent at:", new Date().toISOString());
    // Example: Add auth token
    config.headers = { ...config.headers, Authorization: "Bearer token-123" };
    return config;
  },
  (error: AxiosError) => Promise.reject(error)
);

// Response Interceptor: modify responses before they reach `.then()` or `await`
apiClient.interceptors.response.use(
  (response: AxiosResponse) => {
    console.log("Response received:", response.status);
    return response;
  },
  (error: AxiosError) => {
    console.error("Global Axios Error:", error.message);
    return Promise.reject(error);
  }
);

/* ---------------------------
   4. Canceling Requests
--------------------------- */
// Option A: Using CancelToken (deprecated in favor of AbortController but still widely used)
const source: CancelTokenSource = axios.CancelToken.source();

async function getDataWithCancel() {
  try {
    const request = apiClient.get("/posts", { cancelToken: source.token });
    // Cancel request after 100ms
    setTimeout(() => {
      source.cancel("Request canceled by user");
    }, 100);
    const response = await request;
    console.log(response.data);
  } catch (error) {
    if (axios.isAxiosError(error) && axios.isCancel(error)) {
      console.warn("Request canceled:", error.message);
    }
  }
}

// Option B: Using AbortController (modern approach)
async function getDataWithAbort() {
  const controller = new AbortController();
  try {
    const request = apiClient.get("/posts", { signal: controller.signal });
    // Cancel after 100ms
    setTimeout(() => controller.abort(), 100);
    const response = await request;
    console.log(response.data);
  } catch (error) {
    if ((error as Error).name === "CanceledError") {
      console.warn("Request aborted");
    }
  }
}

/* ---------------------------
   5. Uploading Files
--------------------------- */
async function uploadFile(file: File) {
  const formData = new FormData();
  formData.append("file", file);

  const response = await apiClient.post("/upload", formData, {
    headers: { "Content-Type": "multipart/form-data" },
    onUploadProgress: (progressEvent: ProgressEvent) => {
      const percentCompleted = Math.round((progressEvent.loaded * 100) / (progressEvent.total || 1));
      console.log(`Upload progress: ${percentCompleted}%`);
    }
  });
  console.log("Upload complete:", response.data);
}

/* ---------------------------
   6. Downloading Files
--------------------------- */
async function downloadFile() {
  const response = await apiClient.get("/file.zip", { responseType: "blob" });
  const url = URL.createObjectURL(response.data);
  const link = document.createElement("a");
  link.href = url;
  link.download = "file.zip";
  document.body.appendChild(link);
  link.click();
  link.remove();
  URL.revokeObjectURL(url);
}
```

## Working with Async/Await

```ts
import axios, { AxiosResponse } from "axios";

/* ---------------------------
   1. Axios with Promises
--------------------------- */
// Basic usage with `.then()` and `.catch()`
axios.get("https://jsonplaceholder.typicode.com/posts/1")
  .then((response: AxiosResponse) => {
    console.log("Promise Example (then):", response.data);
  })
  .catch((error) => {
    console.error("Promise Example (catch):", error.message);
  });

/* ---------------------------
   2. Axios with Async/Await
--------------------------- */
// Cleaner syntax, easier to read for multiple calls
async function getPostAsync() {
  try {
    const response: AxiosResponse = await axios.get("https://jsonplaceholder.typicode.com/posts/1");
    console.log("Async/Await Example:", response.data);
  } catch (error) {
    console.error("Async/Await Error:", (error as Error).message);
  }
}
getPostAsync();

/* ---------------------------
   3. Parallel Requests
--------------------------- */
// Option A: axios.all() (specific to Axios)
async function getParallelData_AxiosAll() {
  try {
    const [posts, users] = await axios.all([
      axios.get("https://jsonplaceholder.typicode.com/posts"),
      axios.get("https://jsonplaceholder.typicode.com/users")
    ]);
    console.log("Posts:", posts.data.length);
    console.log("Users:", users.data.length);
  } catch (error) {
    console.error("Parallel Requests Error:", (error as Error).message);
  }
}
getParallelData_AxiosAll();

// Option B: Promise.all() (JavaScript-native)
async function getParallelData_PromiseAll() {
  try {
    const [posts, users] = await Promise.all([
      axios.get("https://jsonplaceholder.typicode.com/posts"),
      axios.get("https://jsonplaceholder.typicode.com/users")
    ]);
    console.log("Posts:", posts.data.length);
    console.log("Users:", users.data.length);
  } catch (error) {
    console.error("Parallel Requests Error:", (error as Error).message);
  }
}
getParallelData_PromiseAll();

/* ---------------------------
   Notes:
---------------------------
- Use `.then()` when you prefer chainable syntax or don't need async/await.
- Async/Await improves readability for multiple sequential calls.
- `axios.all()` is a helper for `Promise.all()`; both achieve the same goal.
- Prefer `Promise.all()` for flexibility, since it's native to JavaScript.
*/
```

## Security & Best Practices

```ts
/* ---------------------------
   1. Preventing XSS (Cross-Site Scripting)
--------------------------- */
// - Never directly inject API responses into the DOM without sanitization.
// - Use libraries like DOMPurify for HTML sanitization.
// Example:
import DOMPurify from "dompurify";

async function fetchAndDisplayContent() {
  const response = await axios.get("https://example.com/content");
  const safeHTML = DOMPurify.sanitize(response.data.content);
  document.getElementById("output")!.innerHTML = safeHTML; // Safe rendering
}

/* ---------------------------
   2. Preventing CSRF (Cross-Site Request Forgery)
--------------------------- */
// - Use CSRF tokens provided by the backend.
// - Send tokens as a header with each request.
axios.defaults.headers.common["X-CSRF-Token"] = getCSRFTokenFromMeta();

function getCSRFTokenFromMeta(): string {
  return document.querySelector<HTMLMetaElement>("meta[name='csrf-token']")?.content || "";
}

/* ---------------------------
   3. Securing API Keys
--------------------------- */
// ❌ DON'T expose API keys in frontend code.
// ✅ Use environment variables & server-side proxies.
// Example (client calls backend instead of API directly):
// Frontend:
await axios.get("/api/weather"); // Hits your server

// Backend (Node.js):
app.get("/api/weather", async (req, res) => {
  const weather = await axios.get(`https://weatherapi.com/data?key=${process.env.WEATHER_KEY}`);
  res.json(weather.data);
});

/* ---------------------------
   4. Error & Retry Strategies
--------------------------- */
// - Handle errors gracefully.
// - Use retry logic for transient failures.
import axiosRetry from "axios-retry";

axiosRetry(axios, { retries: 3, retryDelay: axiosRetry.exponentialDelay });

async function fetchDataWithRetry() {
  try {
    const response = await axios.get("https://unstable-api.com/data");
    console.log("Data:", response.data);
  } catch (error) {
    console.error("Request failed after retries:", (error as Error).message);
  }
}

/* ---------------------------
   5. Rate Limiting
--------------------------- */
// - Prevent overwhelming the API with too many requests.
// - Use throttling or debouncing on frequent calls.
import pThrottle from "p-throttle";

const throttledGet = pThrottle({ limit: 2, interval: 1000 })(axios.get);

async function makeLimitedRequests() {
  await throttledGet("https://api.example.com/data1");
  await throttledGet("https://api.example.com/data2");
}

/* ---------------------------
   Notes:
---------------------------
- Always sanitize user-facing content to prevent XSS.
- Always use CSRF tokens if backend supports them.
- Keep sensitive keys on the server only.
- Implement retries with exponential backoff for reliability.
- Throttle requests to avoid hitting API rate limits.
*/
```

## Axios in Different Environments

```ts
/* ---------------------------
   1. Axios in React
--------------------------- */
// - Commonly used for data fetching inside useEffect.
// - Handle cleanup to prevent memory leaks.
// Example:
import { useEffect, useState } from "react";
import axios from "axios";

function UserList() {
  const [users, setUsers] = useState([]);
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    let isMounted = true;

    axios.get("https://jsonplaceholder.typicode.com/users")
      .then((response) => {
        if (isMounted) {
          setUsers(response.data);
          setLoading(false);
        }
      })
      .catch((error) => console.error("Error:", error));

    return () => {
      isMounted = false; // Cleanup flag
    };
  }, []);

  return loading ? <p>Loading...</p> : <ul>{users.map(u => <li key={u.id}>{u.name}</li>)}</ul>;
}

/* ---------------------------
   2. Axios in Next.js
--------------------------- */
// - Can be used in getServerSideProps (SSR), getStaticProps (SSG), or API routes.
// - On server side, no CORS issues since requests are server-to-server.

// Example: Fetching in getServerSideProps
import { GetServerSideProps } from "next";

export const getServerSideProps: GetServerSideProps = async () => {
  const response = await axios.get("https://jsonplaceholder.typicode.com/posts");
  return { props: { posts: response.data } };
};

function Blog({ posts }: { posts: any[] }) {
  return (
    <div>
      <h1>Blog Posts</h1>
      {posts.map((post) => (
        <article key={post.id}>
          <h2>{post.title}</h2>
          <p>{post.body}</p>
        </article>
      ))}
    </div>
  );
}

export default Blog;

// Example: Using Axios in API Routes (Next.js server)
import type { NextApiRequest, NextApiResponse } from "next";

export default async function handler(req: NextApiRequest, res: NextApiResponse) {
  const response = await axios.get("https://api.github.com/users/octocat");
  res.status(200).json(response.data);
}

/* ---------------------------
   Notes:
---------------------------
- In React, handle component unmount to avoid memory leaks.
- In Next.js, prefer server-side fetching to hide API keys and avoid CORS.
- For reusability, create a centralized Axios instance for your app.
*/
```

## Testing Axios Calls

```ts
/* ---------------------------
   1. Mocking with Jest
--------------------------- */
// - Jest can mock axios to simulate API responses without hitting real endpoints.
// - Useful for unit testing React components or utility functions.

import axios from "axios";
import { render, screen, waitFor } from "@testing-library/react";
import UserList from "./UserList"; // Example component
jest.mock("axios");

test("renders users from API", async () => {
  (axios.get as jest.Mock).mockResolvedValue({
    data: [{ id: 1, name: "John Doe" }],
  });

  render(<UserList />);
  
  await waitFor(() => {
    expect(screen.getByText("John Doe")).toBeInTheDocument();
  });
});

/* ---------------------------
   2. Mocking with MSW (Mock Service Worker)
--------------------------- */
// - MSW intercepts requests on network level (works in browser & Node).
// - More realistic than jest.mock because it keeps Axios logic intact.

import { rest } from "msw";
import { setupServer } from "msw/node";
import axios from "axios";

const server = setupServer(
  rest.get("https://jsonplaceholder.typicode.com/users", (req, res, ctx) => {
    return res(ctx.status(200), ctx.json([{ id: 1, name: "Jane Doe" }]));
  })
);

beforeAll(() => server.listen());
afterEach(() => server.resetHandlers());
afterAll(() => server.close());

test("fetches mocked users with MSW", async () => {
  const response = await axios.get("https://jsonplaceholder.typicode.com/users");
  expect(response.data[0].name).toBe("Jane Doe");
});

/* ---------------------------
   3. Integration Testing
--------------------------- */
// - Ensures Axios calls integrate correctly with UI and backend.
// - Often uses tools like Cypress or Playwright.

import { test, expect } from "@playwright/test";

test("displays API data in UI", async ({ page }) => {
  await page.goto("http://localhost:3000/users");
  
  // Assuming UI fetches data from API
  await expect(page.locator("text=John Doe")).toBeVisible();
});

/* ---------------------------
   Notes:
---------------------------
- For unit tests, jest.mock is faster but less realistic.
- For realistic network behavior, prefer MSW.
- For end-to-end flows, use integration tools like Cypress/Playwright.
*/
```

## Performance Optimization

```ts
/* ---------------------------
   1. Request Deduplication
--------------------------- */
// - Prevents sending the same request multiple times before a response arrives.
// - Can be implemented using a custom request map or libraries like `axios-cache-adapter`.

import axios from "axios";

const pendingRequests = new Map();

function getRequestKey(config: any) {
  return `${config.method}:${config.url}:${JSON.stringify(config.params || {})}:${JSON.stringify(config.data || {})}`;
}

axios.interceptors.request.use((config) => {
  const requestKey = getRequestKey(config);
  if (pendingRequests.has(requestKey)) {
    return Promise.reject({ message: "Duplicate request canceled" });
  }
  pendingRequests.set(requestKey, true);
  return config;
});

axios.interceptors.response.use(
  (response) => {
    const requestKey = getRequestKey(response.config);
    pendingRequests.delete(requestKey);
    return response;
  },
  (error) => {
    if (error.config) {
      const requestKey = getRequestKey(error.config);
      pendingRequests.delete(requestKey);
    }
    return Promise.reject(error);
  }
);

/* ---------------------------
   2. Caching Responses
--------------------------- */
// - Cache GET responses to avoid redundant network calls.
// - Example: Using axios-cache-adapter

import { setup } from "axios-cache-adapter";

const api = setup({
  cache: {
    maxAge: 15 * 60 * 1000 // 15 minutes
  }
});

async function fetchData() {
  const res = await api.get("https://jsonplaceholder.typicode.com/posts");
  console.log(res.data);
}

/* ---------------------------
   3. Optimizing Payloads
--------------------------- */
// - Send only necessary fields to reduce payload size.
// - Use compression where applicable (e.g., gzip, brotli).

async function createUser(user: { name: string; email: string; password: string; extraData?: any }) {
  // Remove large unused data before sending
  const { name, email, password } = user;
  return axios.post("/users", { name, email, password });
}

// Server side: enable gzip/brotli compression (e.g., using Express compression middleware)

import compression from "compression";
import express from "express";
const app = express();
app.use(compression());

app.listen(3000, () => console.log("Server running with compression"));
```

## Troubleshooting

```ts
/* ---------------------------
   1. Common Errors & Fixes
--------------------------- */
// Error: "Network Error" → Usually CORS issue, DNS failure, or server is down.
// Error: "Request failed with status code 404" → Wrong endpoint.
// Error: "Request failed with status code 500" → Server error (check API logs).

import axios from "axios";

async function fetchData() {
  try {
    const res = await axios.get("https://jsonplaceholder.typicode.com/posts");
    console.log(res.data);
  } catch (error) {
    if (axios.isAxiosError(error)) {
      console.error("Axios Error:", error.message);
      if (error.response) {
        console.error("Status:", error.response.status);
        console.error("Data:", error.response.data);
      } else if (error.request) {
        console.error("No response received. Possible network error.");
      }
    } else {
      console.error("Unexpected Error:", error);
    }
  }
}

/* ---------------------------
   2. Debugging Requests
--------------------------- */
// Enable request/response logging for debugging.

axios.interceptors.request.use((config) => {
  console.log(`[Request] ${config.method?.toUpperCase()} → ${config.url}`, config);
  return config;
});

axios.interceptors.response.use(
  (response) => {
    console.log(`[Response] ${response.status} from ${response.config.url}`, response.data);
    return response;
  },
  (error) => {
    console.error("[Error Response]", error);
    return Promise.reject(error);
  }
);

/* ---------------------------
   3. Handling Network Failures
--------------------------- */
// Retry failed requests (e.g., using axios-retry library)

import axiosRetry from "axios-retry";

axiosRetry(axios, {
  retries: 3,
  retryDelay: (retryCount) => retryCount * 1000, // 1s, 2s, 3s
  retryCondition: (error) => axiosRetry.isNetworkOrIdempotentRequestError(error)
});

// Example usage:
axios.get("https://example.com/api").then(console.log).catch(console.error);
```

## Useful Patterns & Real-world Examples

```ts
/* ---------------------------
   1. REST API Integration
--------------------------- */
import axios from "axios";

const api = axios.create({
  baseURL: "https://jsonplaceholder.typicode.com",
});

async function getPosts() {
  const { data } = await api.get("/posts");
  console.log(data);
}

async function createPost(post) {
  const { data } = await api.post("/posts", post);
  console.log(data);
}

/* ---------------------------
   2. Authentication with JWT & Cookies
--------------------------- */
const authApi = axios.create({
  baseURL: "https://api.example.com",
  withCredentials: true, // send cookies
});

authApi.interceptors.request.use((config) => {
  const token = localStorage.getItem("token");
  if (token) {
    config.headers.Authorization = `Bearer ${token}`;
  }
  return config;
});

async function login(credentials) {
  const { data } = await authApi.post("/auth/login", credentials);
  localStorage.setItem("token", data.token);
}

/* ---------------------------
   3. Pagination
--------------------------- */
async function getPaginatedPosts(page = 1, limit = 10) {
  const { data } = await api.get("/posts", {
    params: { _page: page, _limit: limit },
  });
  console.log(`Page ${page}:`, data);
}

/* ---------------------------
   4. Infinite Scrolling
--------------------------- */
let currentPage = 1;
let isLoading = false;

async function loadMorePosts() {
  if (isLoading) return;
  isLoading = true;
  try {
    const { data } = await getPaginatedPosts(currentPage);
    renderPosts(data);
    currentPage++;
  } finally {
    isLoading = false;
  }
}

function renderPosts(posts) {
  posts.forEach((post) => {
    const el = document.createElement("div");
    el.textContent = post.title;
    document.body.appendChild(el);
  });
}

// Attach to scroll event
window.addEventListener("scroll", () => {
  if (window.innerHeight + window.scrollY >= document.body.offsetHeight - 50) {
    loadMorePosts();
  }
});
```
